<div
	class="bg-linear-to-br from-blue-500 to-purple-600 p-4 overflow-hidden"
	style="min-height: calc(100vh - 4rem)">
	<div class="relative p-4">
		<mat-card class="w-full max-w-6xl mx-auto shadow-2xl">
			<mat-card-header class="text-left" style="padding-bottom: 1.5rem">
				<mat-card-title class="text-2xl font-bold text-gray-800"
					>Reservations</mat-card-title
				>
				<mat-card-subtitle class="text-gray-600"
					>View and filter reservations</mat-card-subtitle
				>
			</mat-card-header>
			<mat-card-content>
				<div class="flex gap-4 mb-4">
					<mat-form-field appearance="fill" class="flex-1">
						<mat-label>Search</mat-label>
						<input
							matInput
							[formControl]="searchControl"
							placeholder="Search reservations..." />
						<mat-icon matPrefix>search</mat-icon>
					</mat-form-field>

					<mat-form-field appearance="fill" class="w-48">
						<mat-label>Box</mat-label>
						<input
							matInput
							placeholder="Select or search box..."
							[matAutocomplete]="auto"
							[formControl]="boxControl"
							(input)="onInputChange($event)" />
						<mat-autocomplete
							#auto="matAutocomplete"
							[displayWith]="displayBox">
							<mat-option *ngFor="let box of filteredBoxes" [value]="box">
								{{ box.name }}
							</mat-option>
						</mat-autocomplete>
					</mat-form-field>
				</div>

				<div *ngIf="(loading$ | async)?.loading" class="flex justify-center">
					<mat-spinner></mat-spinner>
				</div>

				<table
					mat-table
					[dataSource]="reservations"
					class="w-full"
					*ngIf="!(loading$ | async)?.loading">
					<ng-container matColumnDef="username">
						<th mat-header-cell *matHeaderCellDef class="w-32">Username</th>
						<td mat-cell *matCellDef="let reservation" class="w-32">
							{{ reservation.username }}
						</td>
					</ng-container>
					<ng-container matColumnDef="boxName">
						<th mat-header-cell *matHeaderCellDef class="w-32">Box Name</th>
						<td mat-cell *matCellDef="let reservation" class="w-32">
							{{ reservation.boxName }}
						</td>
					</ng-container>
					<ng-container matColumnDef="reservation">
						<th mat-header-cell *matHeaderCellDef class="w-20">Quantity</th>
						<td mat-cell *matCellDef="let reservation" class="w-20">
							{{ reservation.reservation }}
						</td>
					</ng-container>
					<ng-container matColumnDef="actions">
						<th mat-header-cell *matHeaderCellDef class="w-24">Actions</th>
						<td mat-cell *matCellDef="let reservation" class="w-24">
							<button
								mat-icon-button
								color="warn"
								(click)="deleteReservation(reservation)"
								aria-label="Delete reservation">
								<mat-icon>delete</mat-icon>
							</button>
						</td>
					</ng-container>
					<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
					<tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
					<tr class="mat-row" *matNoDataRow>
						<td class="mat-cell text-center py-4" colspan="4">No data</td>
					</tr>
				</table>
			</mat-card-content>
		</mat-card>
	</div>
</div>
